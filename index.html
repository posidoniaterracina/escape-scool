<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Escape School</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

body{
    background:#0f172a;
    font-family:Arial, Helvetica, sans-serif;
    overflow:hidden;
    color:white;
}

/* HEADER */
header{
    position:fixed;
    top:0;
    width:100%;
    height:60px;
    background:#111827;
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:0 20px;
    z-index:100;
    box-shadow:0 4px 20px rgba(0,0,0,.4);
}

/* GAME AREA */
#game-wrapper{
    position:absolute;
    top:60px;
    width:100vw;
    height:calc(100vh - 60px);
    overflow:hidden;
}

#camera{
    position:absolute;
    width:2000px;
    height:1200px;
    transition:transform .08s linear;
}

/* FLOOR */
.floor{
    position:absolute;
    width:100%;
    height:100%;
    background:
        repeating-linear-gradient(
            45deg,
            #1e293b,
            #1e293b 40px,
            #1a2535 40px,
            #1a2535 80px
        );
}

/* WALLS */
.wall{
    position:absolute;
    background:#334155;
    box-shadow:
        inset -4px -4px 8px rgba(0,0,0,.4),
        inset 4px 4px 8px rgba(255,255,255,.03);
}

/* PLAYER */
#player{
    position:absolute;
    width:32px;
    height:32px;
    border-radius:50%;
    background:#3b82f6;
    box-shadow:
        0 0 15px #3b82f6,
        inset -3px -3px 6px rgba(0,0,0,.5);
}

#shadow{
    position:absolute;
    width:36px;
    height:12px;
    background:rgba(0,0,0,.5);
    border-radius:50%;
    filter:blur(4px);
}

/* MOBILE CONTROLS */
#controls{
    position:fixed;
    bottom:30px;
    left:50%;
    transform:translateX(-50%);
    width:200px;
    height:200px;
    display:grid;
    grid-template-columns:repeat(3,1fr);
    grid-template-rows:repeat(3,1fr);
    gap:10px;
}

.ctrl{
    background:rgba(255,255,255,.05);
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:22px;
    backdrop-filter:blur(6px);
    box-shadow:0 4px 10px rgba(0,0,0,.4);
}

.ctrl:active{
    background:#3b82f6;
}
</style>
</head>

<body>

<header>
    <div>üè´ Escape School</div>
    <div>Punti: 0 | Debiti: 4</div>
</header>

<div id="game-wrapper">
    <div id="camera">
        <div class="floor"></div>

        <!-- CORRIDOI -->
        <div class="wall" style="top:300px; left:0; width:2000px; height:40px;"></div>
        <div class="wall" style="top:700px; left:0; width:2000px; height:40px;"></div>
        <div class="wall" style="left:900px; top:0; width:40px; height:1200px;"></div>

        <!-- PLAYER -->
        <div id="shadow"></div>
        <div id="player"></div>

    </div>
</div>

<!-- MOBILE D-PAD -->
<div id="controls">
    <div></div>
    <div class="ctrl" id="up">‚¨Ü</div>
    <div></div>
    <div class="ctrl" id="left">‚¨Ö</div>
    <div></div>
    <div class="ctrl" id="right">‚û°</div>
    <div></div>
    <div class="ctrl" id="down">‚¨á</div>
    <div></div>
</div>

<script>
const player = document.getElementById("player");
const shadow = document.getElementById("shadow");
const camera = document.getElementById("camera");

let x = 400;
let y = 400;
const speed = 4;

function update(){
    player.style.left = x + "px";
    player.style.top = y + "px";

    shadow.style.left = x - 2 + "px";
    shadow.style.top = y + 24 + "px";

    camera.style.transform =
        `translate(${-x + window.innerWidth/2 -16}px, ${-y + window.innerHeight/2 -60}px)`;
}

function move(dx,dy){
    x += dx;
    y += dy;
    update();
}

/* CONTROLLI MOBILE */
document.getElementById("up").ontouchstart = ()=> move(0,-speed);
document.getElementById("down").ontouchstart = ()=> move(0,speed);
document.getElementById("left").ontouchstart = ()=> move(-speed,0);
document.getElementById("right").ontouchstart = ()=> move(speed,0);

/* CONTROLLI TASTIERA */
document.addEventListener("keydown", e=>{
    if(e.key==="ArrowUp") move(0,-speed);
    if(e.key==="ArrowDown") move(0,speed);
    if(e.key==="ArrowLeft") move(-speed,0);
    if(e.key==="ArrowRight") move(speed,0);
});

update();
</script>

</body>
</html>
