<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Escape School</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    overflow: hidden;
    font-family: Arial, sans-serif;
    background: #0f172a;
    color: white;
}

/* ===== CAMERA ===== */

#camera {
    position: absolute;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
}

/* ===== MAPPA ===== */

#map {
    position: absolute;
    width: 1400px;
    height: 900px;
    background: #e5e7eb;
    border: 20px solid #111;
    transform-origin: center center;
    transition: transform 0.8s ease;
}

/* ===== STANZE ===== */

.room {
    position: absolute;
    background: #d1d5db;
    border: 8px solid #111;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

.room:hover {
    background: #cbd5e1;
}

/* POSIZIONI REALISTICHE */

#a1 { top: 0; left: 0; width: 400px; height: 250px; }
#a2 { top: 0; left: 400px; width: 400px; height: 250px; }
#a3 { top: 0; left: 800px; width: 400px; height: 250px; }

#corridor {
    position: absolute;
    top: 250px;
    left: 0;
    width: 100%;
    height: 200px;
    background: #9ca3af;
    border-top: 8px solid #111;
    border-bottom: 8px solid #111;
}

#a4 { top: 450px; left: 0; width: 500px; height: 300px; }
#bagno { top: 450px; left: 500px; width: 300px; height: 300px; }
#presidenza { top: 450px; left: 800px; width: 400px; height: 300px; }

/* ===== OVERLAY ===== */

#overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    background: black;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease;
}

.hidden {
    display: none;
}
</style>
</head>

<body>

<div id="camera">
    <div id="map">

        <div id="a1" class="room" data-room="a1">A1</div>
        <div id="a2" class="room" data-room="a2">A2</div>
        <div id="a3" class="room" data-room="a3">A3</div>

        <div id="corridor"></div>

        <div id="a4" class="room" data-room="a4">A4</div>
        <div id="bagno" class="room" data-room="bagno">WC</div>
        <div id="presidenza" class="room" data-room="presidenza">PR</div>

    </div>

    <div id="overlay"></div>
</div>

<script>
const map = document.getElementById("map");
const overlay = document.getElementById("overlay");

document.querySelectorAll(".room").forEach(room => {
    room.addEventListener("click", () => enterRoom(room));
});

function enterRoom(room) {

    const rect = room.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;

    const offsetX = window.innerWidth / 2 - centerX;
    const offsetY = window.innerHeight / 2 - centerY;

    map.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(1.5)`;

    overlay.style.opacity = 1;

    setTimeout(() => {
        alert("Entrato in " + room.dataset.room);
        overlay.style.opacity = 0;
    }, 800);
}
</script>

</body>
</html>
